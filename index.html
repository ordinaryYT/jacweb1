<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ThatLegendJack â€” All-in-One</title>

<style>
  :root{ --ars-red:#EF0107; --ars-white:#FFF; --ars-navy:#063672; --ars-gold:#9C824A; }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:Arial,Helvetica,sans-serif; color:#fff; text-align:center;
    background:linear-gradient(135deg,var(--ars-red) 0%,var(--ars-white) 35%,var(--ars-navy) 70%,var(--ars-gold) 100%);
  }
  h1{
    margin:1rem 0 0; font-size:2.8rem; font-weight:900; text-shadow:2px 2px 5px #000;
    background:linear-gradient(270deg,#EF0107,#FFFFFF,#063672,#EF0107);
    background-size:600% 600%;
    -webkit-background-clip:text; -webkit-text-fill-color:transparent; animation:gradientShift 8s ease infinite;
  }
  @keyframes gradientShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

  .login-container{position:fixed;top:10px;right:20px;background:rgba(0,0,0,.75);padding:10px;border-radius:10px;z-index:20}
  .login-container button{padding:.6rem 1rem;background:var(--ars-red);color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:700}
  .login-container button:hover{background:var(--ars-gold)}

  .nav-center{margin:1rem auto 0;display:flex;justify-content:center;gap:1rem;flex-wrap:wrap}
  .nav-box{
    display:block;min-width:150px;padding:.9rem 1.6rem;font-weight:800;color:#fff;text-decoration:none;border-radius:12px;
    box-shadow:2px 2px 8px rgba(0,0,0,.6);cursor:pointer; transition:.15s;
  }
  .nav-box:hover{transform:translateY(-3px)}
  .home{background:linear-gradient(135deg,var(--ars-gold),var(--ars-red)); border:2px solid var(--ars-white)}
  .about{background:linear-gradient(135deg,var(--ars-red),var(--ars-gold)); border:2px solid var(--ars-white)}
  .leaderboards{background:linear-gradient(135deg,var(--ars-navy),var(--ars-white)); border:2px solid var(--ars-white)}

  .hidden{display:none}
  section{padding:1rem}

  /* Twitch player */
  .player-wrap{max-width:1000px;margin:1rem auto 0;padding:0 1rem}
  .player-frame{position:relative;width:100%;aspect-ratio:16/9;background:#0e0e10;border:2px solid var(--ars-gold);
    border-radius:12px;overflow:hidden;box-shadow:0 8px 24px rgba(0,0,0,.35)}
  #twitch-player{position:absolute;inset:0;width:100%;height:100%}
  .offline-banner{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.75rem;
    background:rgba(0,0,0,.8);padding:1rem;opacity:0;visibility:hidden;transition:.25s}
  .offline-show{opacity:1;visibility:visible}
  .offline-btn{display:inline-block;padding:.55rem .9rem;border-radius:8px;background:linear-gradient(135deg,var(--ars-red),var(--ars-gold));
    color:#fff;text-decoration:none;font-weight:800}

  /* Circles: Spotify + Discord (bottom-right) */
  .status-container{position:fixed;bottom:20px;right:20px;display:flex;gap:1.2rem;flex-wrap:wrap;align-items:flex-end;z-index:15}
  .circle{
    width:130px;height:130px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.82rem;text-align:center;
    padding:10px;box-shadow:2px 2px 6px rgba(0,0,0,.6); background:#111; border:4px solid #333;
  }
  .spotify{border-color:#1DB954}
  .discord{border-color:#5865F2}
  .track{max-width:100px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

  /* Content blocks */
  .wrap{max-width:1100px;margin:1rem auto;padding:1rem;background:rgba(0,0,0,.35);border-radius:12px;text-align:left;border:1px solid rgba(255,255,255,.25)}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
  .card{border-radius:12px;padding:1rem;border:2px solid var(--ars-white);box-shadow:0 8px 24px rgba(0,0,0,.25)}
  .bits{background:linear-gradient(135deg,var(--ars-navy) 0%,var(--ars-white) 100%)}
  .subs{background:linear-gradient(135deg,var(--ars-red) 0%,var(--ars-gold) 100%)}
  table{width:100%;border-collapse:collapse}
  th,td{padding:.45rem .6rem;text-align:left;border-bottom:1px solid rgba(255,255,255,.25)}
  .row{display:flex;gap:.5rem;margin:.45rem 0}
  .row input,.row select,.row button{padding:.5rem;border:none;border-radius:8px}
  .row input,.row select{flex:1}
  .row button{background:var(--ars-red);color:#fff;font-weight:700;cursor:pointer}

  /* Login form */
  form{max-width:420px;margin:1rem auto;background:rgba(0,0,0,.35);padding:1rem;border-radius:12px}
  form input{display:block;width:100%;margin:.5rem 0;padding:.6rem;border:none;border-radius:8px}
  form button{padding:.6rem 1rem;border:none;border-radius:8px;background:var(--ars-red);color:#fff;font-weight:800;cursor:pointer}
  form button:hover{background:var(--ars-gold)}

  @media(max-width:600px){
    .circle{width:92px;height:92px;font-size:.62rem}
    .track{max-width:70px}
  }
</style>
</head>
<body>
  <h1>ThatLegendJack</h1>

  <div class="login-container"><button onclick="showSection('login')">Login</button></div>

  <div class="nav-center">
    <div class="nav-box home" onclick="showSection('home')">Home</div>
    <div class="nav-box about" onclick="showSection('about')">About Me</div>
    <div class="nav-box leaderboards" onclick="showSection('leaderboards')">Leaderboards</div>
  </div>

  <!-- HOME -->
  <section id="home">
    <div class="player-wrap">
      <div class="player-frame">
        <div id="twitch-player"></div>
        <div id="twitch-offline" class="offline-banner">
          <div class="offline-text"><strong>ThatLegendJackk is currently offline.</strong><br/>Check back soon or visit the channel!</div>
          <a class="offline-btn" target="_blank" href="https://www.twitch.tv/ThatLegendJackk">Go to Twitch</a>
        </div>
      </div>
    </div>

    <div class="status-container">
      <div class="circle spotify" id="spotify-circle" title="Spotify now playing">
        <span class="track" id="spotify-track">Spotify: Not Connected</span>
      </div>
      <div class="circle discord" id="discord-circle">
        <span id="discord-status">Discord: Offline</span>
      </div>
    </div>

    <div class="wrap" style="margin-top:1.2rem;text-align:center">
      <details>
        <summary style="cursor:pointer;font-weight:800">Spotify setup (paste Access Token)</summary>
        <div class="row" style="justify-content:center;margin-top:.6rem">
          <input id="spotify_token" placeholder="Paste Spotify ACCESS TOKEN (scope: user-read-currently-playing or user-read-playback-state)" style="max-width:720px">
          <button onclick="saveSpotifyToken()">Save</button>
        </div>
        <p style="opacity:.9;margin:.4rem 0 0 0">Token is stored in this browser via localStorage.</p>
      </details>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="hidden">
    <h2>About Me</h2>
    <div class="wrap" id="about-box">
      This is your About Me section. (Hook this to your server to allow staff editing & saving.)
    </div>
  </section>

  <!-- LEADERBOARDS -->
  <section id="leaderboards" class="hidden">
    <h2>Leaderboards</h2>
    <div class="wrap">
      <div class="grid">
        <div class="card bits">
          <h3>Bits Leaderboard</h3>
          <div class="row" style="align-items:center">
            <label>Period:</label>
            <select id="bits_period" style="max-width:160px">
              <option value="all" selected>all</option>
              <option value="day">day</option>
              <option value="week">week</option>
              <option value="month">month</option>
              <option value="year">year</option>
            </select>
            <label>Count:</label>
            <input id="bits_count" type="number" min="1" max="10" value="10" style="max-width:100px"/>
            <button onclick="refreshBits()">Refresh</button>
          </div>
          <div id="bits-list" style="min-height:160px;background:rgba(255,255,255,.15);border-radius:8px;padding:.5rem;overflow:auto"></div>
        </div>

        <div class="card subs">
          <h3>Gifted Subs (All Time)</h3>
          <div id="subs-list" style="min-height:160px;background:rgba(255,255,255,.15);border-radius:8px;padding:.5rem;overflow:auto"></div>
          <div id="subs-controls" style="margin-top:.6rem">
            <div class="row">
              <input id="sub_user" placeholder="Username"/>
              <input id="sub_gifts" type="number" min="0" placeholder="Gifted count"/>
              <button onclick="addOrUpdateSub()">Add/Update</button>
            </div>
            <div class="row">
              <button style="background:#444" onclick="resetSubs()">Reset Subs List</button>
            </div>
          </div>
        </div>
      </div>

      <details style="margin-top:1rem">
        <summary style="cursor:pointer;font-weight:800">Twitch API credentials for Bits</summary>
        <p style="margin:.25rem 0 .6rem 0">Use a <strong>User access token</strong> with <code>bits:read</code> scope.</p>
        <div class="row">
          <input id="twitch_client_id" placeholder="Client ID (paste here)"/>
          <input id="twitch_access_token" placeholder="Access Token (bits:read)"/>
          <button onclick="saveTwitchCreds()">Save</button>
        </div>
      </details>
    </div>
  </section>

  <!-- LOGIN -->
  <section id="login" class="hidden">
    <h2>Login</h2>
    <form onsubmit="return doLogin(event)">
      <input id="username" placeholder="Username" required/>
      <input id="password" type="password" placeholder="Password" required/>
      <button type="submit">Login</button>
    </form>
  </section>

  <!-- Twitch Embed library -->
  <script src="https://embed.twitch.tv/embed/v1.js"></script>
  <script src="main.js"></script>
</body>
</html>
